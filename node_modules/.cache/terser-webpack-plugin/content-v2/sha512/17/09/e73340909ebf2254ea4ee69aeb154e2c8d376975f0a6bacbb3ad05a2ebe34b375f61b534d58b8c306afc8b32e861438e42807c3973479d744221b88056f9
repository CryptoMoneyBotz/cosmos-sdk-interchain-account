{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{645:function(e,t,a){\"use strict\";a.r(t);var c=a(0),s=Object(c.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"interchain-accounts\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#interchain-accounts\"}},[e._v(\"#\")]),e._v(\" Interchain Accounts\")]),e._v(\" \"),a(\"p\",[a(\"em\",[e._v(\"Implementation of ICS27 for Cosmos-SDK\")])]),e._v(\" \"),a(\"h2\",{attrs:{id:\"status\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#status\"}},[e._v(\"#\")]),e._v(\" Status\")]),e._v(\" \"),a(\"p\",[e._v(\"In progress\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"introduction\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#introduction\"}},[e._v(\"#\")]),e._v(\" Introduction\")]),e._v(\" \"),a(\"p\",[e._v(\"This document outlines the design choices in the implementation of \"),a(\"a\",{attrs:{href:\"https://github.com/cosmos/ics/tree/master/spec/ics-027-interchain-accounts\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"ICS-027\"),a(\"OutboundLink\")],1),e._v(\" for the Cosmos-SDK. Interchain accounts enables an IBC connected chain(s) to: 1. Create an account on a counterparty chain that can be controlled by the logic of the account creator blockchain and 2. Send transaction messages from these interchain accounts.\")]),e._v(\" \"),a(\"p\",[e._v(\"This document introduces the IBC Account module that manages the accounts from other chains.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"structure\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#structure\"}},[e._v(\"#\")]),e._v(\" Structure\")]),e._v(\" \"),a(\"tm-code-block\",{staticClass:\"codeblock\",attrs:{language:\"go\",base64:\"dHlwZSBDb3VudGVycGFydHlJbmZvIHN0cnVjdCB7CgkvLyBUaGlzIG1ldGhvZCB1c2VkIHRvIG1hcnNoYWwgdHJhbnNhY3Rpb24gZm9yIGNvdW50ZXJwYXJ0eSBjaGFpbi4KCVNlcmlhbGl6ZVR4IGZ1bmMoZGF0YSBpbnRlcmZhY2V7fSkgKFtdYnl0ZSwgZXJyb3IpCn0KCnR5cGUgS2VlcGVyIHN0cnVjdCB7CgkuLi4KCWNvdW50ZXJwYXJ0eUluZm9zIG1hcFtzdHJpbmddQ291bnRlcnBhcnR5SW5mbwogICAgLi4uCglyb3V0ZXIgdHlwZXMuUm91dGVyCn0K\"}}),e._v(\" \"),a(\"p\",[e._v(\"The most important part of the IBC account keeper, as shown above, are \"),a(\"strong\",[e._v(\"the map of counterparty info\")]),e._v(\" and \"),a(\"strong\",[e._v(\"router\")]),e._v(\". Because ICS-027 spec defines that the chain can send an arbitrary tx bytes to the counterparty chain, both chains must define the way that they process the caller's requests or make the tx bytes that the callee can process.\")]),e._v(\" \"),a(\"p\",[a(\"code\",[e._v(\"CounterpartyInfo\")]),e._v(\" contains the interface to serialize the counterparty chain's tx bytes from any data, as well as the map of couterparty infos. It also contains the key, such as chain-id and keeper, which the keeper uses to send packets. Therefore, it is necessary to know the exact counterparty chain being executed.\")]),e._v(\" \"),a(\"p\",[a(\"code\",[e._v(\"SerializeCosmosTx(codec *codec.Codec)\")]),e._v(\" provides a way to serialize the tx bytes from messages if the counterparty chain is based on the Cosmos-SDK.\")]),e._v(\" \"),a(\"p\",[e._v(\"The router is used to delegates the process of handling the message to a module. When a packet that requests transaction bytes to be run is passed, it deserializes and gets the handler from the router to be passed to the handler. The keeper will check the result of each message, and if any message returns an error, the entire transaction is aborted, and state changed rolled back.\")]),e._v(\" \"),a(\"h4\",{attrs:{id:\"ibc-packets\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ibc-packets\"}},[e._v(\"#\")]),e._v(\" IBC Packets\")]),e._v(\" \"),a(\"tm-code-block\",{staticClass:\"codeblock\",attrs:{language:\"proto\",base64:\"ZW51bSBUeXBlIHsKICAgIFJFR0lTVEVSID0gMDsKICAgIFJVTlRYID0gMTsKfQoKbWVzc2FnZSBJQkNBY2NvdW50UGFja2V0RGF0YSB7CiAgICBUeXBlIHR5cGUgPSAxOwogICAgYnl0ZXMgZGF0YSA9IDI7Cn0KCm1lc3NhZ2UgSUJDQWNjb3VudFBhY2tldEFja25vd2xlZGdlbWVudCB7CiAgICBUeXBlIHR5cGUgPSAxOwogICAgc3RyaW5nIGNoYWluSUQgPSAyOwogICAgdWludDMyIGNvZGUgPSAzOwogICAgc3RyaW5nIGVycm9yID0gNDsKfQo=\"}}),e._v(\" \"),a(\"p\",[e._v(\"The example above shows the IBC packets that are used in ICS-027. \"),a(\"code\",[e._v(\"Type\")]),e._v(\" indicates what action the packet is performing. When a \"),a(\"code\",[e._v(\"REGISTER\")]),e._v(\" packet type is delivered, the counterparty chain will create an account with the address using the hash of {destPort}/{destChannel}/{packet.data}, assuming a duplicate prior account doesn't exist.\")]),e._v(\" \"),a(\"p\",[e._v(\"If the account is created successfully, it returns an acknowledgement packet to the origin chain with type \"),a(\"code\",[e._v(\"REGISTER\")]),e._v(\" and code \"),a(\"code\",[e._v(\"0\")]),e._v(\". If else, it returns the acknowledgement packet with type \"),a(\"code\",[e._v(\"REGISTER\")]),e._v(\" and code and result according to occured error.\")]),e._v(\" \"),a(\"p\",[e._v(\"When a \"),a(\"code\",[e._v(\"RUNTX\")]),e._v(\" type packet is delivered, the counterparty chain will deserialize the tx bytes (packet's data field) in a predefined way.\")]),e._v(\" \"),a(\"p\",[e._v(\"In this implementation of ICS27 for the Cosmos-SDK, it deserializes the tx bytes into slices of messages and gets the handler from the router and executes and checks the result like described above.\")]),e._v(\" \"),a(\"p\",[e._v(\"If the all messages are successful, it returns the acknowledgment packet to the chain with type \"),a(\"code\",[e._v(\"RUNTX\")]),e._v(\" and code \"),a(\"code\",[e._v(\"0\")]),e._v(\". If else, it returns the acknowledgement packet with type \"),a(\"code\",[e._v(\"RUNTX\")]),e._v(\" and the code and error of first failed message.\")]),e._v(\" \"),a(\"h4\",{attrs:{id:\"hook\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#hook\"}},[e._v(\"#\")]),e._v(\" Hook\")]),e._v(\" \"),a(\"tm-code-block\",{staticClass:\"codeblock\",attrs:{language:\"go\",base64:\"dHlwZSBJQkNBY2NvdW50SG9va3MgaW50ZXJmYWNlIHsKCVdpbGxBY2NvdW50Q3JlYXRlKGN0eCBzZGsuQ29udGV4dCwgY2hhaW5JRCBzdHJpbmcsIGFkZHJlc3Mgc2RrLkFjY0FkZHJlc3MpCglEaWRBY2NvdW50Q3JlYXRlZChjdHggc2RrLkNvbnRleHQsIGNoYWluSUQgc3RyaW5nLCBhZGRyZXNzIHNkay5BY2NBZGRyZXNzKQoKCVdpbGxUeFJ1bihjdHggc2RrLkNvbnRleHQsIGNoYWluSUQgc3RyaW5nLCB0eEhhc2ggW11ieXRlLCBkYXRhIGludGVyZmFjZXt9KQoJRGlkVHhSdW4oY3R4IHNkay5Db250ZXh0LCBjaGFpbklEIHN0cmluZywgdHhIYXNoIFtdYnl0ZSwgZGF0YSBpbnRlcmZhY2V7fSkKfQo=\"}}),e._v(\" \"),a(\"p\",[e._v(\"The example above shows the hook for helping the developer that uses IBC account keeper.\")]),e._v(\" \"),a(\"p\",[e._v(\"The hook lets the developer know: 1. when the IBC account is expected to be created to the counterparty chain and 2. when the IBC account has been successfully created on the counterparty chain.\")]),e._v(\" \"),a(\"p\",[e._v(\"Before sending the packet with a \"),a(\"code\",[e._v(\"IBCAccountPacketData\")]),e._v(\" which type is \"),a(\"code\",[e._v(\"REGISTER\")]),e._v(\", \"),a(\"code\",[e._v(\"WillAccountCreate\")]),e._v(\" is executed with the counterparty chain's chain-id and expected address. If the acknowledgement packet with the type \"),a(\"code\",[e._v(\"REGISTER\")]),e._v(\" and code \"),a(\"code\",[e._v(\"0\")]),e._v(\" is delivered, \"),a(\"code\",[e._v(\"DidAccountCreated\")]),e._v(\" is executed with the counterparty chain's chain-id and address.\")]),e._v(\" \"),a(\"p\",[e._v(\"Before sending the packet with a \"),a(\"code\",[e._v(\"IBCAccountPacketData\")]),e._v(\" which type is \"),a(\"code\",[e._v(\"RUNTX\")]),e._v(\", \"),a(\"code\",[e._v(\"WillTxRun\")]),e._v(\" is executed with the counterparty chain's chain-id and virtual tx hash and requested data that is not serialized. If the acknowledgement packet with the type \"),a(\"code\",[e._v(\"RUNTX\")]),e._v(\" and code \"),a(\"code\",[e._v(\"0\")]),e._v(\" is delivered, \"),a(\"code\",[e._v(\"DidTxRun\")]),e._v(\" is executed with the counterparty chain's chain-id and virtual tx hash and requested data that is not serialized. Virtual tx hash is used only for internal logic to distinguish the requested tx and it is computed by hashing the tx bytes and sequence of packet.\")])],1)}),[],!1,null,null,null);t.default=s.exports}}]);","extractedComments":[]}